# Project 第一阶段报告

刘淼 徐沁玫 孙家平 2018.5.18



由问题构建的简单到复杂，我们抽象了三个可以用图变换解的问题模型。分别是，汉诺塔问题，拼图问题，和魔方问题

### 一、汉诺塔 Hanoi

一个经典的算法问题，但是递归复杂度就有$O(2^n)$，因此用图变换算法来解也需要一定的策略才行。

1. metamodel: 比较显然的：Object 就是盘子(Disk) 和 杆子(Rod) ，其中具有的关系是 盘子叠在盘子上面(On)，盘子比盘子小（smaller_than），盘子在杆子上面（On_Rod）。

   为了表示最终目标的杆子，引入一个Object：Goal，对杆子来说，有属性 Rod_is_not_goal，这样最后在判断是否完成时只需要判断 `nac`: not_goal 的杆子上是否有任何的盘子。如果有就没有达成目标。

2. rules: 图变换的操作只有一个：把盘子从一个杆子上移到另一个杆子上，不过细节上可能需要分类讨论。但都需要满足2个条件：

   +  被移动的盘子是最上方的 用`nac`保证
   +  如果要移到另一个盘子上，那么那个盘子必须也在最上方，且需要满足大小关系；如果要移到一个空的杆子上，那么那个杆子上要保证没有任何其他的盘子。

### 二、拼图

拼图游戏指的是将一个图片划分成n* n个碎片，随机拿走一一小块，剩余的打乱放入n* n方格中，通过上下左右移动小块将图片还原

1.metamodel：分为pieces和map两种，map互相之间有左边和上面的关系，pieces和map之间有match关系，即原本pieces应在的位置，pieces和map还有on关系，即pieces在这个map上

2.rules：变换只有碎片上下左右移动四个操作，需要判定目标map上有无其他碎片，如果有就无法执行

3.goal：最后要保证pieces的match和on指向同一个map

 ### 三、魔方

 这里指简单的三阶魔方，当然更复杂的魔方只需要在此基础上进行简单修改就可以实现。在这里建造的metamodel使用了比较simple的模型，但是却可以在一定程度上简化搜索运算。

 1.metamodel: Object包括Tile、Color和Center,分别代表魔方面上的块、面的颜色和这个面。其中具有的Relations包括块的颜色(Tile_is_color)、面的颜色(Center_is_color)、块在面上的位置 以及在哪块面上(Tile_on_center)、面之间的关系和颜色之间不等的关系(color_isnot_color)

 2.rules:先选定魔方正面，然后再定下魔方的侧面、上下和后面。然后以此为基准就可以引申出六种魔方的旋转,分别是：正面左行向上转90°、正面右行向上转90°、正面上行向右转90°、正面下行向右转90°、正面顺时针转90°和背面顺时针转90°。每一次旋转需要改变那一个面上的块在面上的位置，以及那一个面的四周的3*4个块: 这些块相当于换了一个Center，但是在Center中的相对位置是不变的。

 3.goal:最后只需检查graph中是否有在面上的块的颜色与面的颜色不同即可。